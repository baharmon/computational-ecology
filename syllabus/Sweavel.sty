% Originally from Frank Harrell's group at 
% <http://biostat.mc.vanderbilt.edu/wiki/Main/SweaveTemplate>. 
% Some small modifications by Kieran Healy <http://kieranhealy.org>. 


% Replaces Sweave.sty
% Uses Listings package to allow for more flexible formatting of R
% output in Sweave documents (color backgrounds, etc)
% Usage: \usepackage{Sweavel}

% This version of Sweavel uses color names specified in the <svgnames>
% option to the latex xcolor package. See xcolor package
% documentation Section 4.3 "Colors via svgnames option" for names.

% To change size of R code and output, use e.g.: \def\Sweavesize{\normalsize}
% To change colors of R code, output, and commands, use e.g.:
% \def\Rcolor{\color{black}}
% \def\Routcolor{\color{green}}
% \def\Rcommentcolor{\color{red}}
% To change background color or R code and/or output, use e.g.:
% \def\Rbackground{\color{white}}
% \def\Routbackground{\color{white}}
% To use rgb specifications use \color[rgb]{ , , }
% To use gray scale use e.g. \color[gray]{0.5}
% If you change any of these after the first chunk is produced, the
% changes will have effect only for the next chunk.



\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{Sweavel}{}  % substitute for Sweave.sty using
                             % listings package with relsize
\RequirePackage{graphicx}
\RequirePackage[svgnames]{xcolor}
\RequirePackage{listings,fancyvrb,relsize,ae}
\RequirePackage[T1]{fontenc}
\IfFileExists{upquote.sty}{\RequirePackage{upquote}}{}

\providecommand{\Sweavesize}{\smaller}

\providecommand{\Rcolor}{\color{Black}}
\providecommand{\Routcolor}{\color{NavyBlue}}
\providecommand{\Rcommentcolor}{\color[rgb]{0.101, 0.043, 0.432}}

\providecommand{\Rbackground}{\color{WhiteSmoke}}
%\providecommand{\Routbackground}{\color[gray]{0.935}}
\providecommand{\Routbackground}{\color{Ivory}}
% Can specify \color[gray]{1} for white background or just \color{white}


\lstdefinestyle{Rstyle}{fancyvrb=false,escapechar=`,language=R,%
                        basicstyle={\Rcolor\Sweavesize\ttfamily},%
                        backgroundcolor=\Rbackground,%
                        showstringspaces=false,%
                        keywordstyle=\Rcolor,%
                        commentstyle={\Rcommentcolor\ttfamily\itshape},%
                        literate={<-}{{$\leftarrow$}}2{<<-}{{$\twoheadleftarrow$}}2{~}{{$\sim$}}1{<=}{{$\leq$}}2{>=}{{$\geq$}}2{^}{{$^{\scriptstyle\wedge}$}}1,%
                        alsoother={$},%
                        alsoletter={.<-},%
                        otherkeywords={!,!=,~,$,*,\&,\%/\%,\%*\%,\%\%,<-,<<-,/},%
                        escapeinside={(*}{*)},
                        frame=single,framerule=0.1pt,framesep=1pt,rulecolor=\color{Black},
                        numbers=left,numberstyle=\tiny,stepnumber=1,numbersep=7pt,title={\ttfamily\tiny
                          R Code},
                        keywordstyle={\Rcolor}}
%
% Other options of interest:

\lstdefinestyle{Routstyle}{fancyvrb=false,literate={~}{{$\sim$}}1{R^2}{{$R^{2}$}}2{^}{{$^{\scriptstyle\wedge}$}}1{R-squared}{{$R^{2}$}}2,%
  basicstyle={\Routcolor\Sweavesize\ttfamily},%
  backgroundcolor=\Routbackground}

\newenvironment{Schunk}{}{}
\lstnewenvironment{Sinput}{\lstset{style=Rstyle}}{}
\lstnewenvironment{Scode}{\lstset{style=Rstyle}}{}
\lstnewenvironment{Soutput}{\lstset{style=Routstyle}}{}
\lstnewenvironment{Sinputsmall}{%
 \lstset{style=Rstyle,basicstyle={\color{Rcolor}\small}}}{}
\lstnewenvironment{Sinputsmaller}{%
 \lstset{style=Rstyle,basicstyle={\color{Rcolor}\smaller}}}{}

\endinput
